(()=>{if(localStorage.getItem("operationsAllDate")){let o=document.querySelector(".list-all-operation");if(o)for(let[s,r]of Object.entries(JSON.parse(localStorage.getItem("operationsAllDate"))).reverse()){let i=`<div class="list-all-operation__wrapper" data-dat="all${s}">\n                        <p class="list-all-operation__date">${s}</p>\n                    </div>`;function e(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".list-all-operation__wrapper")}o.append(e(i));for(let n=0;n<r.length;n++){let c=`<div class="list-category__item item-category">\n                    <div class="item-category__icon ${r[n].icon}" style="background-color:${r[n].bg}"></div>\n                    <div class="item-category__info">\n                        <p class="item-category__name">${r[n].title}</p>\n                    </div>\n                    <div class="item-category__total">${r[n].cost} BYN</div>\n                    </div>`;function t(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}document.querySelector(`[data-dat="all${s}"]`).append(t(c))}}}const a=document.getElementById("chartAllOperation"),l=new Chart(a,{type:"bubble",data:{datasets:[]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{type:"time",time:{unit:"day"},ticks:{stepSize:5}},y:{ticks:{stepSize:200}}}}});!function(){let e=JSON.parse(localStorage.getItem("operationsAllDate")),t=[];for(let a in e)e[a].forEach((e=>{t.includes(e.title)||t.push(e.title)}));let a={};t.forEach((t=>{a[t]=[];for(let l in e){let o=e[l].reduce(((e,a)=>a.title===t?e+a.cost:e),0);a[t].push(o)}}));let o=[];for(let e of Object.values(a))o.push(e);let s=[];for(let t in e)e[t].forEach((e=>{s.includes(e.bg)||s.push(e.bg)}));let r=[];for(let e of Object.keys(JSON.parse(localStorage.getItem("operationsAllDate")))){let t=e.split(".").reverse();t=t.join("-"),r.push(t)}console.log(r);let i=0;for(let e=0;e<o.length;e++)for(let t=0;t<o[e].length;t++)i+=o[e][t];console.log(o),console.log(i);let n=[];for(let e=0;e<o.length;e++){n.push([]);for(let t=0;t<o[e].length;t++)n[e].push(o[e][t]/i*150)}console.log(n),l.data.labels=r;for(let e=0;e<o.length;e++)l.data.datasets[e]||l.data.datasets.push({label:"Dataset 1",backgroundColor:[],data:[],radius:[]}),l.data.datasets[e].data=o[e],l.data.datasets[e].backgroundColor=s[e],l.data.datasets[e].radius=n[e];l.update()}()})();