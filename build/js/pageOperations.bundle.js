(()=>{if(localStorage.getItem("operationsAllDate")){let o=document.querySelector(".list-all-operation");if(o)for(let[r,s]of Object.entries(JSON.parse(localStorage.getItem("operationsAllDate")))){let i=`<div class="list-all-operation__wrapper" data-dat="all${r}">\n                        <p class="list-all-operation__date">${r}</p>\n                    </div>`;function t(t){return(new DOMParser).parseFromString(t,"text/html").querySelector(".list-all-operation__wrapper")}o.append(t(i));for(let n=0;n<s.length;n++){let c=`<div class="list-category__item item-category">\n                    <div class="item-category__icon ${s[n].icon}" style="background-color:${s[n].bg}"></div>\n                    <div class="item-category__info">\n                        <p class="item-category__name">${s[n].title}</p>\n                    </div>\n                    <div class="item-category__total">${s[n].cost} BYN</div>\n                    </div>`;function e(t){return(new DOMParser).parseFromString(t,"text/html").querySelector(".item-category")}document.querySelector(`[data-dat="all${r}"]`).append(e(c))}}}const a=document.getElementById("chartAllOperation"),l=new Chart(a,{type:"bubble",data:{datasets:[]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{type:"time",time:{unit:"day"},ticks:{stepSize:5}}}}});!function(){let t=JSON.parse(localStorage.getItem("operationsAllDate")),e=[];for(let a in t)t[a].forEach((t=>{e.includes(t.title)||e.push(t.title)}));let a={};e.forEach((e=>{a[e]=[];for(let l in t){let o=t[l].reduce(((t,a)=>a.title===e?t+a.cost:t),0);a[e].push(o)}}));let o=[];for(let t of Object.values(a))o.push(t);let r=[];for(let e in t)t[e].forEach((t=>{r.includes(t.bg)||r.push(t.bg)}));let s=[];for(let t of Object.keys(JSON.parse(localStorage.getItem("operationsAllDate")))){let e=t.split(".").reverse();e=e.join("-"),s.push(e)}let i=0;for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++)i+=o[t][e];console.log(o),console.log(i);let n=[];for(let t=0;t<o.length;t++){n.push([]);for(let e=0;e<o[t].length;e++)n[t].push(o[t][e]/i*150)}console.log(n),l.data.labels=s;for(let t=0;t<o.length;t++)l.data.datasets[t]||l.data.datasets.push({label:"Dataset 1",backgroundColor:[],data:[],radius:[]}),l.data.datasets[t].data=o[t],l.data.datasets[t].backgroundColor=r[t],l.data.datasets[t].radius=n[t];l.update()}()})();