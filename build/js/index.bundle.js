(()=>{"use strict";let e=[],t=[];localStorage.getItem("categories")&&JSON.parse(localStorage.getItem("categories")).forEach((o=>{e.push(o.bg),t.push(o.cost)}));const o=document.getElementById("myChart"),c=new Chart(o,{type:"doughnut",data:{datasets:[{data:[...t],backgroundColor:[...e],borderWidth:1}]}});(function(){let e=document.querySelector(".popup-category"),t=document.querySelector(".overblock"),o=document.querySelectorAll(".tools-categories__item_add"),c=document.querySelector(".popup-category__close");o.forEach((o=>{o.addEventListener("click",(function(){e.classList.add("popup-category_open"),t.classList.add("overblock_open")}))})),t.addEventListener("click",(function(){e.classList.remove("popup-category_open"),t.classList.remove("overblock_open")})),c.addEventListener("click",(function(){e.classList.remove("popup-category_open"),t.classList.remove("overblock_open")}))})(),function(e){let t={},o=[],c=document.querySelector(".popup-category__input"),r=document.querySelector(".popup-category__inp-bg"),a=document.querySelector(".popup-category__inp-color"),l=document.querySelectorAll(".popup-category__icon");if(localStorage.getItem("categories")){o=JSON.parse(localStorage.getItem("categories"));let d=document.querySelector(".categories__list");for(let p=0;p<JSON.parse(localStorage.getItem("categories")).length;p++){console.log(p);let _=`<div class="list-categories__item">\n                        <div class="list-categories__icon ${JSON.parse(localStorage.getItem("categories"))[p].icon}" style="background-color:${JSON.parse(localStorage.getItem("categories"))[p].bg}"></div>\n                        <div class="list-categories__info">\n                            <p class="list-categories__name">${JSON.parse(localStorage.getItem("categories"))[p].title}</p>\n                        </div>\n                        <div class="list-categories__total">0 BYN</div>\n                        </div>`;function y(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".list-categories__item")}d.append(y(_))}}function s(e,t,o){let c=e.value,r=t.value;return e.addEventListener("input",(function(){c=e.value,o.classList.contains("act")&&(o.style.backgroundColor=c,o.style.border=`2px solid ${c}`)})),t.addEventListener("input",(function(){r=t.value,o.classList.contains("act")&&(o.style.color=r)})),[c,r]}l.forEach((e=>{e.style.backgroundColor=r.value,e.style.color=a.value})),l.forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".popup-category__icon").forEach((e=>{e.style.backgroundColor="#808080",e.style.color="white",e.classList.remove("act"),e.style.border="2px solid gray"})),e.classList.add("act"),e.style.border=`2px solid ${s(r,a,e)[0]}`,e.style.backgroundColor=s(r,a,e)[0],e.style.color=s(r,a,e)[1],t.icon=e.dataset.categoryIcon}))}));let i=document.querySelector(".popup-category__button"),n=document.querySelector(".popup-category"),u=document.querySelector(".overblock"),g=0;i.addEventListener("click",(function(){(function(e){let t=!0;return""==e.title&&(t=!1),e.icon||(t=!1),console.log(t),t})(t)&&(g++,localStorage.getItem("categories")&&(console.log(localStorage.getItem("categories")),g=JSON.parse(localStorage.getItem("categories"))[JSON.parse(localStorage.getItem("categories")).length-1].index,g++),function(e,t){e.index=t,e.title=c.value,e.bg=r.value,e.color=a.value,e.cost=1}(t,g),function(){let e=document.querySelector(".categories__list"),o=`<div class="list-categories__item">\n                        <div class="list-categories__icon ${t.icon}" style="background-color:${t.bg}"></div>\n                        <div class="list-categories__info">\n                            <p class="list-categories__name">${t.title}</p>\n                        </div>\n                        <div class="list-categories__total">0 BYN</div>\n                        </div>`;e.append(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".list-categories__item")}(o))}(),n.classList.remove("popup-category_open"),u.classList.remove("overblock_open"),o.push(Object.assign({},t)),localStorage.setItem("categories",JSON.stringify(o)),function(t){let o=[],c=[];t.forEach((e=>{o.push(e.bg),c.push(e.cost)})),e.data.datasets[0].data=[...c],e.data.datasets[0].backgroundColor=[...o],e.update()}(o),setTimeout((function(){!function(e){delete e.icon,c.value="",r.value="#808080",a.value="#FFFFFF",document.querySelector(".popup-category__icon.act").style.backgroundColor="#808080",document.querySelector(".popup-category__icon.act").style.color="white",document.querySelector(".popup-category__icon.act").style.border="2px solid gray",document.querySelector(".popup-category__icon.act").classList.remove("act")}(t)}),0))}))}(c)})();