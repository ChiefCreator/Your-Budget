(()=>{"use strict";let e=[],t=[],o=[],c=[];localStorage.getItem("categories")&&(e=JSON.parse(localStorage.getItem("categories")),e.forEach((e=>{c.push(e.title),t.push(e.bg),0==e.cost?o.push(1):o.push(e.cost)})));const a=document.getElementById("myChart"),r=new Chart(a,{type:"doughnut",data:{labels:c,datasets:[{data:o,backgroundColor:t,borderWidth:1}]},options:{plugins:{legend:{display:!1}}}});let s=[],l=[],i=[],n=[];localStorage.getItem("categoriesIncome")&&(s=JSON.parse(localStorage.getItem("categoriesIncome")),s.forEach((e=>{n.push(e.title),l.push(e.bg),0==e.cost?i.push(1):i.push(e.cost)})));const g=document.getElementById("chartIncome"),p=new Chart(g,{type:"doughnut",data:{labels:n,datasets:[{data:i,backgroundColor:l,borderWidth:1}]},options:{plugins:{legend:{display:!1}}}});(function(){let e=document.querySelector(".popup-category_expenses"),t=document.querySelector(".popup-category_income"),o=document.querySelector(".overblock"),c=document.querySelectorAll(".tools-categories__item_expenses"),a=document.querySelectorAll(".tools-categories__item_income"),r=document.querySelector(".popup-category__close");c.forEach((t=>{t.addEventListener("click",(function(){e.classList.add("popup-category_open"),o.classList.add("overblock_open")}))})),a.forEach((e=>{e.addEventListener("click",(function(){t.classList.add("popup-category_open"),o.classList.add("overblock_open")}))})),o.addEventListener("click",(function(){e.classList.remove("popup-category_open"),t.classList.remove("popup-category_open"),o.classList.remove("overblock_open")})),r.addEventListener("click",(function(){e.classList.remove("popup-category_open"),t.classList.remove("popup-category_open"),o.classList.remove("overblock_open")}))})(),function(e,t){let o={},c=document.querySelector(".popup-category__input"),a=document.querySelector(".popup-category__inp-bg"),r=document.querySelector(".popup-category__inp-color"),s=document.querySelectorAll(".popup-category__icon");if(localStorage.getItem("categories")){t=JSON.parse(localStorage.getItem("categories"));let u=document.querySelector(".categories__list");for(let d=0;d<JSON.parse(localStorage.getItem("categories")).length;d++){let m=`<div class="list-categories__item item-category" data-index="${JSON.parse(localStorage.getItem("categories"))[d].index}">\n                        <div class="item-category__icon ${JSON.parse(localStorage.getItem("categories"))[d].icon}" style="background-color:${JSON.parse(localStorage.getItem("categories"))[d].bg}"></div>\n                        <div class="item-category__info">\n                            <p class="item-category__name">${JSON.parse(localStorage.getItem("categories"))[d].title}</p>\n                        </div>\n                        <div class="item-category__total">0 BYN</div>\n                        </div>`;function _(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}u.append(_(m))}}function l(e,t,o){let c=e.value,a=t.value;return e.addEventListener("input",(function(){c=e.value,o.classList.contains("act")&&(o.style.backgroundColor=c,o.style.border=`2px solid ${c}`)})),t.addEventListener("input",(function(){a=t.value,o.classList.contains("act")&&(o.style.color=a)})),[c,a]}s.forEach((e=>{e.style.backgroundColor=a.value,e.style.color=r.value})),s.forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".popup-category__icon").forEach((e=>{e.style.backgroundColor="#808080",e.style.color="white",e.classList.remove("act"),e.style.border="2px solid gray"})),e.classList.add("act"),e.style.border=`2px solid ${l(a,r,e)[0]}`,e.style.backgroundColor=l(a,r,e)[0],e.style.color=l(a,r,e)[1],o.icon=e.dataset.categoryIcon}))}));let i=document.querySelector(".popup-category__button"),n=document.querySelector(".popup-category"),g=document.querySelector(".overblock"),p=0;i.addEventListener("click",(function(){(function(e){let t=!0;return""==e.title&&(t=!1),e.icon||(t=!1),console.log(t),t})(o)&&(p++,localStorage.getItem("categories")&&(console.log(localStorage.getItem("categories")),p=JSON.parse(localStorage.getItem("categories"))[JSON.parse(localStorage.getItem("categories")).length-1].index,p++),function(e,t){e.index=t,e.title=c.value,e.bg=a.value,e.color=r.value,e.cost=0}(o,p),function(){let e=document.querySelector(".categories__list"),t=`<div class="list-categories__item item-category" data-index="${o.index}">\n                        <div class="item-category__icon ${o.icon}" style="background-color:${o.bg}"></div>\n                        <div class="item-category__info">\n                            <p class="item-category__name">${o.title}</p>\n                        </div>\n                        <div class="item-category__total">0 BYN</div>\n                        </div>`;e.append(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}(t))}(),n.classList.remove("popup-category_open"),g.classList.remove("overblock_open"),localStorage.getItem("operations")?(t=JSON.parse(localStorage.getItem("operations"))).push(Object.assign({},o)):t.push(Object.assign({},o)),localStorage.setItem("categories",JSON.stringify(t)),localStorage.setItem("operations",JSON.stringify(t)),function(t){let o=[],c=[],a=[];t.forEach((e=>{o.push(e.title),c.push(e.bg),0==e.cost?a.push(1):a.push(e.cost)})),e.data.datasets[0].data=a,e.data.datasets[0].backgroundColor=c,e.update()}(t),setTimeout((function(){!function(e){delete e.icon,c.value="",a.value="#808080",r.value="#FFFFFF",document.querySelector(".popup-category__icon.act").style.backgroundColor="#808080",document.querySelector(".popup-category__icon.act").style.color="white",document.querySelector(".popup-category__icon.act").style.border="2px solid gray",document.querySelector(".popup-category__icon.act").classList.remove("act")}(o)}),0))}))}(r,e),function(e,t){let o={},c=document.querySelector(".popup-category_income"),a=c.querySelector(".popup-category__input"),r=c.querySelector(".popup-category__inp-bg"),s=c.querySelector(".popup-category__inp-color"),l=c.querySelectorAll(".popup-category__icon");if(localStorage.getItem("categoriesIncome")){t=JSON.parse(localStorage.getItem("categoriesIncome"));let d=document.querySelector(".list-categories_income");for(let m=0;m<JSON.parse(localStorage.getItem("categoriesIncome")).length;m++){let _=`<div class="list-categories__item item-category item-category_income" data-index="${JSON.parse(localStorage.getItem("categoriesIncome"))[m].index}">\n                        <div class="item-category__icon ${JSON.parse(localStorage.getItem("categoriesIncome"))[m].icon}" style="background-color:${JSON.parse(localStorage.getItem("categoriesIncome"))[m].bg}"></div>\n                        <div class="item-category__info">\n                            <p class="item-category__name">${JSON.parse(localStorage.getItem("categoriesIncome"))[m].title}</p>\n                        </div>\n                        <div class="item-category__total">0 BYN</div>\n                        </div>`;function y(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}d.append(y(_))}}function i(e,t,o){let c=e.value,a=t.value;return e.addEventListener("input",(function(){c=e.value,o.classList.contains("act")&&(o.style.backgroundColor=c,o.style.border=`2px solid ${c}`)})),t.addEventListener("input",(function(){a=t.value,o.classList.contains("act")&&(o.style.color=a)})),[c,a]}l.forEach((e=>{e.style.backgroundColor=r.value,e.style.color=s.value})),l.forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".popup-category__icon").forEach((e=>{e.style.backgroundColor="#808080",e.style.color="white",e.classList.remove("act"),e.style.border="2px solid gray"})),e.classList.add("act"),e.style.border=`2px solid ${i(r,s,e)[0]}`,e.style.backgroundColor=i(r,s,e)[0],e.style.color=i(r,s,e)[1],o.icon=e.dataset.categoryIcon}))}));let n=c.querySelector(".popup-category__button"),g=document.querySelector(".popup-category_income"),p=document.querySelector(".overblock"),u=0;n.addEventListener("click",(function(){(function(e){let t=!0;return""==e.title&&(t=!1),e.icon||(t=!1),console.log(t),t})(o)&&(u++,localStorage.getItem("categoriesIncome")&&(console.log(localStorage.getItem("categoriesIncome")),u=JSON.parse(localStorage.getItem("categoriesIncome"))[JSON.parse(localStorage.getItem("categoriesIncome")).length-1].index,u++),function(e,t){e.index=t,e.title=a.value,e.bg=r.value,e.color=s.value,e.cost=0}(o,u),function(){let e=document.querySelector(".list-categories_income");console.log(e);let t=`<div class="list-categories__item item-category item-category_income" data-index="${o.index}">\n                        <div class="item-category__icon ${o.icon}" style="background-color:${o.bg}"></div>\n                        <div class="item-category__info">\n                            <p class="item-category__name">${o.title}</p>\n                        </div>\n                        <div class="item-category__total">0 BYN</div>\n                        </div>`;e.append(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}(t))}(),g.classList.remove("popup-category_open"),p.classList.remove("overblock_open"),localStorage.getItem("operationsIncome")?(t=JSON.parse(localStorage.getItem("operationsIncome"))).push(Object.assign({},o)):t.push(Object.assign({},o)),localStorage.setItem("categoriesIncome",JSON.stringify(t)),localStorage.setItem("operationsIncome",JSON.stringify(t)),function(t){let o=[],c=[],a=[];t.forEach((e=>{o.push(e.title),c.push(e.bg),0==e.cost?a.push(1):a.push(e.cost)})),e.data.datasets[0].data=a,e.data.datasets[0].backgroundColor=c,e.update()}(t),setTimeout((function(){!function(e){delete e.icon,a.value="",r.value="#808080",s.value="#FFFFFF",c.querySelector(".popup-category__icon.act").style.backgroundColor="#808080",c.querySelector(".popup-category__icon.act").style.color="white",c.querySelector(".popup-category__icon.act").style.border="2px solid gray",c.querySelector(".popup-category__icon.act").classList.remove("act")}(o)}),0))}))}(p,s),function(e){let t=document.querySelector(".popup-operation_expenses"),o=document.querySelector(".overblock"),c=t.querySelector(".popup-operation__button"),a=t.querySelector(".popup-operation__input"),r=t.querySelector(".popup-operation__close");if(localStorage.getItem("operations")){let e=0;document.querySelectorAll(".list-categories_expenses .list-categories__item").forEach(((t,o)=>{t.querySelector(".item-category__total").textContent=`${JSON.parse(localStorage.getItem("operations"))[o].cost} BYN`,e+=JSON.parse(localStorage.getItem("operations"))[o].cost,document.querySelector(".slider-categories__total-num").textContent=e}))}function s(){t.classList.remove("popup-operation_open"),o.classList.remove("overblock_open"),a.value=""}window.addEventListener("click",(function(e){if(e.target.closest(".list-categories_expenses .list-categories__item")){document.querySelectorAll(".list-categories_expenses .list-categories__item").forEach((e=>{e.classList.remove("act")}));let c=e.target.closest(".list-categories_expenses .list-categories__item");c.classList.add("act"),t.classList.add("popup-operation_open"),o.classList.add("overblock_open"),function(e){let t=e.dataset.index;document.querySelectorAll(".popup-operation__body .item-category").forEach((e=>{e.style.display="none"}));let o=document.querySelector(".list-categories"),c=`<div class="item-category" data-index="${JSON.parse(localStorage.getItem("operations"))[t-1].index}">\n                    <div class="item-category__icon ${JSON.parse(localStorage.getItem("operations"))[t-1].icon}" style="background-color:${JSON.parse(localStorage.getItem("operations"))[t-1].bg}"></div>\n                    <div class="item-category__info">\n                        <p class="item-category__name">${JSON.parse(localStorage.getItem("operations"))[t-1].title}</p>\n                    </div>\n                    <div class="item-category__total">${JSON.parse(localStorage.getItem("operations"))[t-1].cost} BYN</div>\n                    </div>`;o.append(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}(c))}(c)}})),c.addEventListener("click",(function(){let t=0,o=JSON.parse(localStorage.getItem("operations")),c=document.querySelector(".list-categories__item.act"),r=o[c.dataset.index-1],l=+a.value;r.cost+=l;let i=[];o.forEach((e=>{i.push(e.cost)})),o[c.dataset.index-1]=r,localStorage.setItem("operations",JSON.stringify(o)),localStorage.setItem("categories",JSON.stringify(o)),c.querySelector(".item-category__total").textContent=`${o[c.dataset.index-1].cost} BYN`,document.querySelectorAll(".list-categories_expenses .list-categories__item").forEach(((e,o)=>{t+=JSON.parse(localStorage.getItem("operations"))[o].cost})),document.querySelector(".slider-categories__total-num").textContent=t,e.data.datasets[0].data=i,e.update(),s()})),o.addEventListener("click",(function(){s()})),r.addEventListener("click",(function(){s()}))}(r),function(e){let t=document.querySelector(".popup-operation_income"),o=document.querySelector(".overblock"),c=t.querySelector(".popup-operation__button"),a=t.querySelector(".popup-operation__input"),r=t.querySelector(".popup-operation__close");if(localStorage.getItem("operationsIncome")){let e=0;document.querySelectorAll(".list-categories_income .list-categories__item").forEach(((t,o)=>{t.querySelector(".item-category__total").textContent=`${JSON.parse(localStorage.getItem("operationsIncome"))[o].cost} BYN`,e+=JSON.parse(localStorage.getItem("operationsIncome"))[o].cost,document.querySelector(".slider-categories__item_income .slider-categories__total-num").textContent=e}))}function s(){t.classList.remove("popup-operation_open"),o.classList.remove("overblock_open"),a.value=""}window.addEventListener("click",(function(e){if(e.target.closest(".list-categories_income .list-categories__item")){document.querySelectorAll(".list-categories_income .list-categories__item").forEach((e=>{e.classList.remove("act")}));let c=e.target.closest(".list-categories_income .list-categories__item");c.classList.add("act"),t.classList.add("popup-operation_open"),o.classList.add("overblock_open"),function(e){let t=e.dataset.index;document.querySelectorAll(".popup-operation_income .item-category").forEach((e=>{e.style.display="none"}));let o=document.querySelector(".popup-operation_income .list-categories"),c=`<div class="item-category item-category_income" data-index="${JSON.parse(localStorage.getItem("operationsIncome"))[t-1].index}">\n                    <div class="item-category__icon ${JSON.parse(localStorage.getItem("operationsIncome"))[t-1].icon}" style="background-color:${JSON.parse(localStorage.getItem("operationsIncome"))[t-1].bg}"></div>\n                    <div class="item-category__info">\n                        <p class="item-category__name">${JSON.parse(localStorage.getItem("operationsIncome"))[t-1].title}</p>\n                    </div>\n                    <div class="item-category__total">${JSON.parse(localStorage.getItem("operationsIncome"))[t-1].cost} BYN</div>\n                    </div>`;o.append(function(e){return(new DOMParser).parseFromString(e,"text/html").querySelector(".item-category")}(c))}(c)}})),c.addEventListener("click",(function(){let t=0,o=JSON.parse(localStorage.getItem("operationsIncome")),c=document.querySelector(".list-categories_income .list-categories__item.act"),r=o[c.dataset.index-1],l=+a.value;r.cost+=l;let i=[];o.forEach((e=>{i.push(e.cost)})),o[c.dataset.index-1]=r,localStorage.setItem("operationsIncome",JSON.stringify(o)),localStorage.setItem("categoriesIncome",JSON.stringify(o)),c.querySelector(".item-category__total").textContent=`${o[c.dataset.index-1].cost} BYN`,document.querySelectorAll(".list-categories_income .list-categories__item").forEach(((e,o)=>{t+=JSON.parse(localStorage.getItem("operationsIncome"))[o].cost})),document.querySelector(".slider-categories__item_income .slider-categories__total-num").textContent=t,e.data.datasets[0].data=i,e.update(),s()})),o.addEventListener("click",(function(){s()})),r.addEventListener("click",(function(){s()}))}(p),function(){let e=document.querySelector(".slide-button"),t=document.querySelector(".slider-categories"),o=document.querySelector(".categories__tab_expenses"),c=document.querySelector(".categories__tab_income");e.addEventListener("click",(function(){e.classList.toggle("slide-button_active"),t.classList.toggle("slider-categories_active"),o.classList.toggle("categories__tab_active"),c.classList.toggle("categories__tab_active")}))}()})();